install.packages("purrr")
#Load packages
library(tidyverse)
library(purrr)
df<-
tibble(
a = rnorm(10),
b = rnorm(10),
c = rnorm(10),
d = rnorm(10),
e = rnorm(10)
)
col_summary <-
function(df,fun){
out <- vector("double", length(df))
for(i in seq_along(df)){
out[i] <- fun(df[[i]])
}
out
}
col_summary(df,mean)
mean(df$a)
#Check what we are iterating
1:ncol(df)
seq_along(df)
#[]
df[i]
df[[i]]
for(i in seq_along(df)){
out[i] <- fun(df[[i]])
}
col_summary <-
function(df,fun){
out <- vector("double", length(df))
for(i in seq_along(df)){
out[i] <- fun(df[[i]])
}
out
}
col_summary(df,mean)
#[]
df[i]
df[[i]]
# map()
map(df, mean)
map(df,mean) %>% #return a list
bind_cols()
df2<-
map(df,mean) %>% #return a list
bind_cols() # return columns in 1 row
df2<-
map(mean,trim=.1) %>% #return a list
bind_cols() # return columns in 1 row
df2<-
map(mean,trim=.1) %>% #return a list
bind_cols()
df2 %>%
map(
{
\(x)mean(x)/sd(x)
}
) %>%
bind_cols()
mtcars
mtcars %>%
split(~cyl)
mtcars %>%
split(~cyl) %>% #split the dataframe by cyl into 3 dataframes(cyl=4,6,8)
map(
{
\(x) lm(msg~wt, data =x)
}
)
mtcars %>%
split(~cyl) %>% #split the dataframe by cyl into 3 dataframes(cyl=4,6,8)
map(
{
\(x) lm(mpg~wt, data =x)
}
)
mtcars %>%
split(~cyl) %>% #split the dataframe by cyl into 3 dataframes(cyl=4,6,8)
map(
{
\(x) lm(mpg~wt, data =x)
}
) %>%
map(summary)
cyl_regressions<-
mtcars %>%
split(~cyl) %>% #split the dataframe by cyl into 3 dataframes(cyl=4,6,8)
map(
{
\(x) lm(mpg~wt, data =x)
}
) %>%
map(summary) #return statistic results in each cyl's list
View(cyl_regressions)
cyl_regressions[[i]]$r.squared
cyl_regressions<-
mtcars %>%
split(~cyl) %>% #split the dataframe by cyl into 3 dataframes(cyl=4,6,8)
map(
{
\(x) lm(mpg~wt, data =x)
}
) %>%
map(summary) %>%  #return statistic results in each cyl's list
map(
{
\(x) x$r.squared
}
)
cyl_regressions[[i]]$r.squared
cyl_regressions<-
mtcars %>%
split(~cyl) %>% #split the dataframe by cyl into 3 dataframes(cyl=4,6,8)
map(
{
\(x) lm(mpg~wt, data =x)
}
) %>%
map(summary) %>%  #return statistic results in each cyl's list
map("r.squared")
cyl_regressions[[i]]$r.squared
df2 %>%
map(
{
\(x) mean(x)/sd(x)
}
) %>%
bind_cols()
df2<-
map(mean,trim=.1) %>% #return a list
bind_cols() # return columns in 1 row
df2
df2 %>%
map(mean,trim=.1) %>% #return a list
bind_cols() # return columns in 1 row
df %>%
map(mean,trim=.1) %>% #return a list
bind_cols() # return columns in 1 row
df %>%
map(
{
\(x) mean(x)/sd(x)
}
) %>%
bind_cols()
cyl_regressions<-
mtcars %>%
split(~cyl) %>% #split the dataframe by cyl into 3 dataframes(cyl=4,6,8)
map(
{
\(x) lm(mpg~wt, data =x)
}
) %>%
map(summary) %>%  #return statistic results in each cyl's list
map("r.squared")
cyl_regressions[[i]]$r.squared
cyl_regressions<-
mtcars %>%
split(~cyl) %>% #split the dataframe by cyl into 3 dataframes(cyl=4,6,8)
map(
{
\(x) lm(mpg~wt, data =x)
}
) %>%
map(summary) %>%  #return statistic results in each cyl's list
map("r.squared")
cyl_regressions[[1]]$r.squared
cyl_regressions[[i]]$r.squared
View(cyl_regressions)
View(cyl_regressions)
numbers<- list(1,2,3,4,5)
squared_numbers <- map(numbers, ~ .x^2)
library(tidyverse)
library(purrr)
> squared_numbers <- map(numbers, ~ .x^2)
squared_numbers <- map(numbers, ~ .x^2)
squared_numbers[[1]]
squared_numbers[[2]]
squared_numbers[1]
squared_numbers[2]
#load packages
library(tidyverse)
library(ggplot2)
setwd("C:/Users/littl/ban400/git-Tomoko-Yamagata")
#Read text data
raw_text <- readLines(con = "C:/Users/littl/ban400/git-Tomoko-Yamagata/suites_dw_Table1.txt")
#Read text data
galaxy <- readLines(con = "C:/Users/littl/ban400/git-Tomoko-Yamagata/suites_dw_Table1.txt")
# identify L
L <- which(startsWith(galaxy, "----"))
# store description
cat(galaxy[1:(L-2), file ="description.txt", sep = "\n"]) #separate by line shift
#extract variable names
variable_names <-str_replace_all(galaxy[(L-1),"",""])
#extract variable names
variable_names <-str_replace_all(galaxy[(L-1)],"","")
variable_names <- unlist(strsplit(variable_names, "\\|"))
# format data
comma_separated_values <-
galaxy[(L+1):length(galaxy)] %>%
str_replace_all(.," ","") %>%
str_replace_all(., "\\|", ",")
# plot size of
galaxies_new %>%
ggplot(aes(x= D, y=log_lk)) %>%
geom_point()+
geom_smooth()
hubble <- readLines(con = "C:/Users/littl/ban400/git-Tomoko-Yamagata/suites_dw_Table1.txt"
hubble <- readLines(con = "C:/Users/littl/ban400/git-Tomoko-Yamagata/suites_dw_Table1.txt")
hubble <- readLines(con = "C:/Users/littl/ban400/git-Tomoko-Yamagata/suites_dw_Table1.txt")
setwd("C:/Users/littl/ban400/iterations-Tomoko-Yamagata")
# load packages
library(jsonlite)
library(httr)
library(jsonlite)
library(ggplot2)
library(DescTools)
library(tidyverse)
library(magrittr)
library(rlang)
library(lubridate)
library(anytime)
library(readr)
library(yaml)
